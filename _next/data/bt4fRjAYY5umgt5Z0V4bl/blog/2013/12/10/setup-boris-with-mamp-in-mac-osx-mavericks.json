{"pageProps":{"article":{"title":"Setup boris with MAMP in Mac OSX Mavericks","slug":["2013","12","10","setup-boris-with-mamp-in-mac-osx-mavericks"],"uri":"2013/12/10/setup-boris-with-mamp-in-mac-osx-mavericks","date":"2013/12/10","content":"var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var P=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),b=(s,e)=>{for(var i in e)t(s,i,{get:e[i],enumerable:!0})},h=(s,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of u(e))!g.call(s,l)&&l!==i&&t(s,l,{get:()=>e[l],enumerable:!(a=d(e,l))||a.enumerable});return s};var M=(s,e,i)=>(i=s!=null?p(m(s)):{},h(e||!s||!s.__esModule?t(i,\"default\",{value:s,enumerable:!0}):i,s)),j=s=>h(t({},\"__esModule\",{value:!0}),s);var c=P((w,r)=>{r.exports=_jsx_runtime});var _={};b(_,{default:()=>N,frontmatter:()=>A});var n=M(c()),A={layout:\"post\",title:\"Setup boris with MAMP in Mac OSX Mavericks\",date:\"2013-12-10\",comments:!0,categories:[\"php\",\"macosx\"]};function o(s){let e=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",pre:\"pre\",code:\"code\",em:\"em\",span:\"span\"},s.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"For me who is used to having REPL as an essential tools for development, \",(0,n.jsx)(e.a,{href:\"https://github.com/d11wtq/boris\",children:\"Boris\"}),` is a must have when developing PHP web app.\nBut after updating to MAMP 2.0 and PHP 5.5.3, it stopped working. There is no error output, the REPL just doesn't appear.\nAfter several hours of googling, I found out the reason is that MAMP's PHP is built with out `,(0,n.jsx)(e.strong,{children:\"pcntl\"}),\" and \",(0,n.jsx)(e.strong,{children:\"readline\"}),\" support, which boris depends on. To get those features, there is no other way then manually compile and add them to MAMP's PHP installation.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"First, we need to download the source code for MAMP's PHP. In my case it's PHP 5.5.3\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"hljs language-sh\",children:`$ php -v\nCopyright (c) 1997-2013 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies\n    with Zend OPcache v7.0.3-dev, Copyright (c) 1999-2013, by Zend Technologies\n\n$ wget http://museum.php.net/php5/php-5.5.3.tar.gz\n$ tar -xzvf php-5.5.3.tar.gz\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"After that change the folder name to \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"php\"})}),\" and move it \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"include\"})}),\" folder in MAMP's PHP 5.5.3 folder\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"mv\"}),` php-5.5.3 php\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"mkdir\"}),` -p /Applications/MAMP/bin/php/php5.5.3/include\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"mv\"}),` php /Applications/MAMP/bin/php/php5.5.3/include\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"Then, use the configure it to prepare all the necessary header files\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"mv\"}),` php-5.5.3 php\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"cd\"}),` /Applications/MAMP/bin/php/php5.5.3/include/php\n$ ./configure\n`]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now, we process to build the \",(0,n.jsx)(e.strong,{children:\"pcntl\"}),\" and \",(0,n.jsx)(e.strong,{children:\"readline\"}),` extension.\nBut before that, we must set some flags so that they are compiled with dual 32bit and 64bit architecture as MAMP PHP was built this way.`]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[`$ MACOSX_DEPLOYMENT_TARGET=10.9\n$ CFLAGS=`,(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp\"'}),`\n$ CCFLAGS=`,(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"-arch i386 -arch x86_64 -g -Os -pipe\"'}),`\n$ CXXFLAGS=`,(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"-arch i386 -arch x86_64 -g -Os -pipe\"'}),`\n$ LDFLAGS=`,(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"-arch i386 -arch x86_64 -bind_at_load\"'}),`\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"export\"}),` CFLAGS CXXFLAGS LDFLAGS CCFLAGS MACOSX_DEPLOYMENT_TARGET\n`]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now, what left is compiling the extensions, move the compiled \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\".so\"})}),\" files to MAMP's PHP extensions directory:\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"cd\"}),` ext/pcntl\n$ phpize\n$ ./configure\n$ make\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"cp\"}),` modules/pcntl.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"cd\"}),` ../readline\n$ phpize\n$ ./configure\n$ make\n$ `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"cp\"}),` modules/readline.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"Finally edit the MAMP's PHP php.ini file to include those extensions\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"extension=pcntl.so\\\\nextension=readline.so\"'}),` >> /Applications/MAMP/bin/php/php5.5.3/conf/php.ini\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"Now we are done, just install boris if you haven't done so and enjoy playing PHP code in the terminal\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-sh\",children:[`$ brew install boris\n$ boris\n[1] boris> `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"Hello World!\\\\n\"'}),`;\nHello World!\n[2] boris>\n`]})})]})}function f(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(o,s)})):o(s)}var N=f;return j(_);})();\n;return Component;"}},"__N_SSG":true}