{"pageProps":{"article":{"title":"Moving from rbenv to chruby and direnv","slug":["2014","02","27","moving-from-rbenv-to-chruby"],"uri":"2014/02/27/moving-from-rbenv-to-chruby","date":"2014/02/27","content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    strong: \"strong\",\n    code: \"code\",\n    a: \"a\",\n    pre: \"pre\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"I was a happy user of \", _jsx(_components.strong, {\n        children: \"rbenv\"\n      }), \". It does have some drawback such as having to \", _jsx(_components.code, {\n        children: \"rbenv rehash\"\n      }), \" everytime after installing new gems or having to manually manage binstubs.But all of them are trivial and can be solved with rbenv's plugins like \", _jsx(_components.code, {\n        children: \"rbenv-binstubs\"\n      }), \" , \", _jsx(_components.code, {\n        children: \"rbenv-rehash\"\n      }), \". But I wanted to try something new, something minimal and so I moved to \", _jsx(_components.strong, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/postmodern/chruby\",\n          children: \"chruby\"\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Install \", _jsx(_components.strong, {\n        children: \"chruby\"\n      }), \" is pretty easy with \", _jsx(_components.strong, {\n        children: \"homebrew\"\n      }), \" (You are using homebrew, right?):\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-sh\",\n        children: \"$ brew install chruby\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After that, add the following line to your \", _jsx(_components.code, {\n        children: \"~/.zshrc\"\n      }), \" or \", _jsx(_components.code, {\n        children: \"~/.bashrc\"\n      })]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"source\"\n        }), \" /usr/local/share/chruby/chruby.sh\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"But as the name say chruby main function is only to \", _jsx(_components.strong, {\n        children: \"change ruby\"\n      }), \" :D. To install ruby you must either install \", _jsx(_components.strong, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/postmodern/ruby-install\",\n          children: \"ruby-install\"\n        })\n      }), \" or \", _jsx(_components.strong, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/sstephenson/ruby-build\",\n          children: \"ruby-build\"\n        })\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In case, you are already \", _jsx(_components.strong, {\n        children: \"ruby-build\"\n      }), \" (inevitably, if you are using \", _jsx(_components.strong, {\n        children: \"rbenv\"\n      }), \"), you can just use you old ruby installation folder by adding it to the \", _jsx(_components.strong, {\n        children: \"RUBIES\"\n      }), \" variable:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"source\"\n        }), \" /usr/local/share/chruby/chruby.sh\\n\\nRUBIES+=(~/.rbenv/versions/*)\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After that, continuing to use \", _jsx(_components.strong, {\n        children: \"ruby-build\"\n      }), \" to manage your ruby installation\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In my case, I moved to \", _jsx(_components.strong, {\n        children: \"ruby-install\"\n      }), \". Install it in just one command line:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-sh\",\n        children: \"$ brew install ruby-install\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"After that, install the latest and greatest Ruby:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-sh\",\n        children: \"$ ruby-install ruby 2.1.1\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To make a ruby version default, simply just call chruby after it was initialized in your \", _jsx(_components.code, {\n        children: \"~/.zshrc\"\n      }), \" or \", _jsx(_components.code, {\n        children: \"~/.bashrc\"\n      })]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-sh\",\n        children: \"...\\nchruby ruby-2.1.1\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you want to define a specific ruby version for your project and enable auto-switching to that version when \", _jsx(_components.code, {\n        children: \"cd\"\n      }), \" to your project folder (well, you should), add a \", _jsx(_components.code, {\n        children: \".ruby-version\"\n      }), \" file to the root of the folder:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# ./.ruby-version\"\n        }), \"\\nruby-2.1.1\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"And enable the auto-switch function of \", _jsx(_components.strong, {\n        children: \"chruby\"\n      }), \" in your \", _jsx(_components.code, {\n        children: \"~/.bashrc\"\n      }), \" or \", _jsx(_components.code, {\n        children: \"~/.zshrc\"\n      }), \" file:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"source\"\n        }), \" /usr/local/share/chruby/chruby.sh\\n\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"source\"\n        }), \" /usr/local/share/chruby/auto.sh\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Now, you have a working \", _jsx(_components.strong, {\n        children: \"chruby\"\n      }), \" setup. But in your Rails project, you still have to type \", _jsx(_components.code, {\n        children: \"$ bin/'your-god-knows-gem-command'\"\n      }), \" each time to use your generated gem binstubs. For some people, it's ok, but not for me :D. Previously, when using \", _jsx(_components.strong, {\n        children: \"rbenv\"\n      }), \", it can be solved with the plugin \", _jsx(_components.code, {\n        children: \"rbenv-binstubs\"\n      }), \". With \", _jsx(_components.strong, {\n        children: \"chruby\"\n      }), \", we will use \", _jsx(_components.strong, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/zimbatm/direnv\",\n          children: \"direnv\"\n        })\n      }), \" to eliminate this problem once and for all. Install it with \", _jsx(_components.strong, {\n        children: \"brew\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-sh\",\n        children: \"$ brew install direnv\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To add the \", _jsx(_components.code, {\n        children: \"bin\"\n      }), \" folder of your project to the \", _jsx(_components.strong, {\n        children: \"PATH\"\n      }), \", create a \", _jsx(_components.code, {\n        children: \".envrc\"\n      }), \" with the following line in the root of your project folder:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"export\"\n        }), \" PATH=\", _jsx(_components.span, {\n          className: \"hljs-variable\",\n          children: \"$PWD\"\n        }), \"/bin:\", _jsx(_components.span, {\n          className: \"hljs-variable\",\n          children: \"$PATH\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After that, allow \", _jsx(_components.strong, {\n        children: \"direnv\"\n      }), \" to modify your \", _jsx(_components.strong, {\n        children: \"PATH\"\n      }), \" in this folder\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-sh\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"cd\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'your-project-folder'\"\n        }), \"\\n$ direnv allow\\ndirenv: loading .envrc\\ndirenv: \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"export\"\n        }), \" ~PATH\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"From now on, in your project folder, forget the additional \", _jsx(_components.code, {\n        children: \"bundle exec\"\n      }), \" or \", _jsx(_components.code, {\n        children: \"bin/\"\n      }), \" and just type your favorite command.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"With \", _jsx(_components.strong, {\n        children: \"chruby\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"direnv\"\n      }), \" properly setup (you should if you followed my instructions), now we are have a combo of lightweight but effective weapons to adventure with any kind of Ruby project. I wish you all the best :D\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{"layout":"post","title":"Moving from rbenv to chruby and direnv","date":"2014-02-27","comments":true,"categories":["ruby","macosx"]},"scope":{}}}},"__N_SSG":true}