<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Setup boris with MAMP in Mac OSX Mavericks</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ca28742dea069f7f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ca28742dea069f7f.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9329ea5b86c4254b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9329ea5b86c4254b.css" data-n-p=""/><link rel="preload" href="/_next/static/css/f32fa768ea6210e2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f32fa768ea6210e2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-34c76af51fb9f015.js" defer=""></script><script src="/_next/static/chunks/framework-3581bb99e4b98af8.js" defer=""></script><script src="/_next/static/chunks/main-5769d850ce2d583a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9718a2f7b960e9fe.js" defer=""></script><script src="/_next/static/chunks/623-ae19d368fba904e1.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-580ba8ec8fb736c8.js" defer=""></script><script src="/_next/static/jF65RbaW6T5xxpAV_ypcW/_buildManifest.js" defer=""></script><script src="/_next/static/jF65RbaW6T5xxpAV_ypcW/_ssgManifest.js" defer=""></script><script src="/_next/static/jF65RbaW6T5xxpAV_ypcW/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><header class="border-b layout-separator"><div class="sm:w-5/6 lg:w-1/2 mx-auto h-full flex p-3"><div class="flex flex-row items-baseline justify-between leading-loose w-full pt-3"><a class="hover:underline font-semibold text-2xl" href="/">A Lazy Developer‘s Blog</a><nav><a class="hover:underline" href="/about">About</a></nav></div></div></header><div class="mt-5"><div class="sm:w-5/6 lg:w-1/2 mx-auto h-full flex p-3"><article class="w-full"><div class="flex-col"><div class="border-b layout-separator pb-1 flex flex-row items-baseline justify-between"><p class="text-3xl">Setup boris with MAMP in Mac OSX Mavericks</p><p class="italic font-thin">2013/12/10</p></div><div class="article_markdown__NJfUa"><p>For me who is used to having REPL as an essential tools for development, <a href="https://github.com/d11wtq/boris">Boris</a> is a must have when developing PHP web app.
But after updating to MAMP 2.0 and PHP 5.5.3, it stopped working. There is no error output, the REPL just doesn't appear.
After several hours of googling, I found out the reason is that MAMP's PHP is built with out <strong>pcntl</strong> and <strong>readline</strong> support, which boris depends on. To get those features, there is no other way then manually compile and add them to MAMP's PHP installation.</p>
<p>First, we need to download the source code for MAMP's PHP. In my case it's PHP 5.5.3</p>
<pre><code class="hljs language-sh">$ php -v
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies
    with Zend OPcache v7.0.3-dev, Copyright (c) 1999-2013, by Zend Technologies

$ wget http://museum.php.net/php5/php-5.5.3.tar.gz
$ tar -xzvf php-5.5.3.tar.gz
</code></pre>
<p>After that change the folder name to <em><strong>php</strong></em> and move it <em><strong>include</strong></em> folder in MAMP's PHP 5.5.3 folder</p>
<pre><code class="hljs language-sh">$ <span class="hljs-built_in">mv</span> php-5.5.3 php
$ <span class="hljs-built_in">mkdir</span> -p /Applications/MAMP/bin/php/php5.5.3/include
$ <span class="hljs-built_in">mv</span> php /Applications/MAMP/bin/php/php5.5.3/include
</code></pre>
<p>Then, use the configure it to prepare all the necessary header files</p>
<pre><code class="hljs language-sh">$ <span class="hljs-built_in">mv</span> php-5.5.3 php
$ <span class="hljs-built_in">cd</span> /Applications/MAMP/bin/php/php5.5.3/include/php
$ ./configure
</code></pre>
<p>Now, we process to build the <strong>pcntl</strong> and <strong>readline</strong> extension.
But before that, we must set some flags so that they are compiled with dual 32bit and 64bit architecture as MAMP PHP was built this way.</p>
<pre><code class="hljs language-sh">$ MACOSX_DEPLOYMENT_TARGET=10.9
$ CFLAGS=<span class="hljs-string">"-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp"</span>
$ CCFLAGS=<span class="hljs-string">"-arch i386 -arch x86_64 -g -Os -pipe"</span>
$ CXXFLAGS=<span class="hljs-string">"-arch i386 -arch x86_64 -g -Os -pipe"</span>
$ LDFLAGS=<span class="hljs-string">"-arch i386 -arch x86_64 -bind_at_load"</span>
$ <span class="hljs-built_in">export</span> CFLAGS CXXFLAGS LDFLAGS CCFLAGS MACOSX_DEPLOYMENT_TARGET
</code></pre>
<p>Now, what left is compiling the extensions, move the compiled <em><strong>.so</strong></em> files to MAMP's PHP extensions directory:</p>
<pre><code class="hljs language-sh">$ <span class="hljs-built_in">cd</span> ext/pcntl
$ phpize
$ ./configure
$ make
$ <span class="hljs-built_in">cp</span> modules/pcntl.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212
$ <span class="hljs-built_in">cd</span> ../readline
$ phpize
$ ./configure
$ make
$ <span class="hljs-built_in">cp</span> modules/readline.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212
</code></pre>
<p>Finally edit the MAMP's PHP php.ini file to include those extensions</p>
<pre><code class="hljs language-sh">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"extension=pcntl.so\nextension=readline.so"</span> >> /Applications/MAMP/bin/php/php5.5.3/conf/php.ini
</code></pre>
<p>Now we are done, just install boris if you haven't done so and enjoy playing PHP code in the terminal</p>
<pre><code class="hljs language-sh">$ brew install boris
$ boris
[1] boris> <span class="hljs-built_in">echo</span> <span class="hljs-string">"Hello World!\n"</span>;
Hello World!
[2] boris>
</code></pre></div><div class="mt-12 border-t layout-separator pt-1"><div id="disqus_thread"></div></div></div></article></div></div><footer class="border-t layout-separator mt-5 mb-10"><div class="sm:w-5/6 lg:w-1/2 mx-auto h-full flex p-3"><div class="flex lg:flex-row flex-col flex-wrap justify-between pt-4"><div class="lg:w-1/4 w-auto"><ul><li><a class="hover:underline" href="https://github.com/linhmtran168"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> <!-- -->linhmtran168<!-- --></a></li><li><a class="hover:underline" href="https://twitter.com/day_dreamer168"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg> <!-- -->day_dreamer168<!-- --></a></li></ul></div><div class="lg:w-2/4 w-auto"><p class="font-thin">This is a blog where a lazy developer ranting about his developer‘s life and his never ending journey in the land of knowledge.</p></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"title":"Setup boris with MAMP in Mac OSX Mavericks","slug":["2013","12","10","setup-boris-with-mamp-in-mac-osx-mavericks"],"uri":"2013/12/10/setup-boris-with-mamp-in-mac-osx-mavericks","updatedTime":"2013/12/10","content":"\u003cp\u003eFor me who is used to having REPL as an essential tools for development, \u003ca href=\"https://github.com/d11wtq/boris\"\u003eBoris\u003c/a\u003e is a must have when developing PHP web app.\nBut after updating to MAMP 2.0 and PHP 5.5.3, it stopped working. There is no error output, the REPL just doesn't appear.\nAfter several hours of googling, I found out the reason is that MAMP's PHP is built with out \u003cstrong\u003epcntl\u003c/strong\u003e and \u003cstrong\u003ereadline\u003c/strong\u003e support, which boris depends on. To get those features, there is no other way then manually compile and add them to MAMP's PHP installation.\u003c/p\u003e\n\u003cp\u003eFirst, we need to download the source code for MAMP's PHP. In my case it's PHP 5.5.3\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ php -v\nCopyright (c) 1997-2013 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies\n    with Zend OPcache v7.0.3-dev, Copyright (c) 1999-2013, by Zend Technologies\n\n$ wget http://museum.php.net/php5/php-5.5.3.tar.gz\n$ tar -xzvf php-5.5.3.tar.gz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter that change the folder name to \u003cem\u003e\u003cstrong\u003ephp\u003c/strong\u003e\u003c/em\u003e and move it \u003cem\u003e\u003cstrong\u003einclude\u003c/strong\u003e\u003c/em\u003e folder in MAMP's PHP 5.5.3 folder\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e php-5.5.3 php\n$ \u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e -p /Applications/MAMP/bin/php/php5.5.3/include\n$ \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e php /Applications/MAMP/bin/php/php5.5.3/include\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen, use the configure it to prepare all the necessary header files\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e php-5.5.3 php\n$ \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e /Applications/MAMP/bin/php/php5.5.3/include/php\n$ ./configure\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, we process to build the \u003cstrong\u003epcntl\u003c/strong\u003e and \u003cstrong\u003ereadline\u003c/strong\u003e extension.\nBut before that, we must set some flags so that they are compiled with dual 32bit and 64bit architecture as MAMP PHP was built this way.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ MACOSX_DEPLOYMENT_TARGET=10.9\n$ CFLAGS=\u003cspan class=\"hljs-string\"\u003e\"-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp\"\u003c/span\u003e\n$ CCFLAGS=\u003cspan class=\"hljs-string\"\u003e\"-arch i386 -arch x86_64 -g -Os -pipe\"\u003c/span\u003e\n$ CXXFLAGS=\u003cspan class=\"hljs-string\"\u003e\"-arch i386 -arch x86_64 -g -Os -pipe\"\u003c/span\u003e\n$ LDFLAGS=\u003cspan class=\"hljs-string\"\u003e\"-arch i386 -arch x86_64 -bind_at_load\"\u003c/span\u003e\n$ \u003cspan class=\"hljs-built_in\"\u003eexport\u003c/span\u003e CFLAGS CXXFLAGS LDFLAGS CCFLAGS MACOSX_DEPLOYMENT_TARGET\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, what left is compiling the extensions, move the compiled \u003cem\u003e\u003cstrong\u003e.so\u003c/strong\u003e\u003c/em\u003e files to MAMP's PHP extensions directory:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e ext/pcntl\n$ phpize\n$ ./configure\n$ make\n$ \u003cspan class=\"hljs-built_in\"\u003ecp\u003c/span\u003e modules/pcntl.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212\n$ \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e ../readline\n$ phpize\n$ ./configure\n$ make\n$ \u003cspan class=\"hljs-built_in\"\u003ecp\u003c/span\u003e modules/readline.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFinally edit the MAMP's PHP php.ini file to include those extensions\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"extension=pcntl.so\\nextension=readline.so\"\u003c/span\u003e \u003e\u003e /Applications/MAMP/bin/php/php5.5.3/conf/php.ini\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we are done, just install boris if you haven't done so and enjoy playing PHP code in the terminal\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e$ brew install boris\n$ boris\n[1] boris\u003e \u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Hello World!\\n\"\u003c/span\u003e;\nHello World!\n[2] boris\u003e\n\u003c/code\u003e\u003c/pre\u003e"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2013","12","10","setup-boris-with-mamp-in-mac-osx-mavericks"]},"buildId":"jF65RbaW6T5xxpAV_ypcW","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>